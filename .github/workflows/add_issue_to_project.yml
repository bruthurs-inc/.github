name: Add Operations Issues to Project
on:
  issues:
    types: [opened]
jobs:
  map-fields:
    runs-on: ubuntu-latest
    if: contains(github.event.issue.labels.*.name, 'triage')
    steps:
      - name: Map Issue Fields to Project Fields
        uses: github-actions/add-issue-to-project@v1
        with:
          project: "bruthurs-inc/2"
          github-token: ${{ secrets.GITHUB_TOKEN }}
          fields: >-
            {
              "Due Date": "${{ fromJson(github.event.issue.body).due_date }}",
              "Priority": "${{ fromJson(github.event.issue.body).priority }}",
              "Level of Effort": "${{ fromJson(github.event.issue.body).level_of_effort }}"
            }
